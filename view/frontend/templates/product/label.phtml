<?php
/**
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this module to newer
 * versions in the future.
 *
 * @category  Smile
 * @package   Smile\ProductLabel
 * @author    Houda EL RHOZLANE <houda.elrhozlane@smile.fr>
 * @copyright 2019 Smile
 * @license   Open Software License ("OSL") v. 3.0
 */

/**
 * Product label visual template
 *
 * @var $block \Smile\ProductLabel\Block\ProductLabel\ProductLabel
 */
?>
<?php if($block->getProductLabels()) : ?>
    <?php $productLabels = $block->getProductLabels(); ?>
    <?php $view = $this->getCurrentView(); ?>
    <div class="productlabel-wrapper
        <?php if ($view == 'category'){ echo 'category';}?>
        <?php if ($view == 'product'){ echo 'product';}?>" id="smile-productlabels-wrapper">
        <?php foreach($productLabels as $productLabel) :?>
            <?php
            $classCSS = '';
            $displayOn = explode(',',$productLabel['display_on']);

            foreach($displayOn as $display) :
                switch($display)
                {
                    case 1:
                        if($view == 'product') :
                            $classCSS = $productLabel['position_product_view'].' product';
                            ?>
                            <div class="<?php echo $classCSS; ?>">
                                <img src="<?php echo $block->getImageUrl($productLabel['image']); ?>"/>
                            </div>
                            <?php
                        endif;
                        break;
                    case 2:
                        if($view == 'category') :
                            $classCSS = $productLabel['position_category_list'].' category';
                            ?>
                            <div class="<?php echo $classCSS; ?>">
                                <img src="<?php echo $block->getImageUrl($productLabel['image']); ?>"/>
                            </div>
                            <?php
                        endif;
                        break;
                    default:
                        $classCSS = '';
                }
            endforeach;
        endforeach;
        ?>
    </div>

    <script type="text/x-magento-init">
    {
         ".productlabel-wrapper" : {
            "Smile_ProductLabel/js/productlabel-position" : {}
         }
    }
    </script>

<?php endif; ?>

